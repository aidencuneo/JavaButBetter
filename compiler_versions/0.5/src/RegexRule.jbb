use java.util.regex.*;

string find = ""
string replace = ""
string stage = "pre"
Pattern pattern = null

RegexRule(string find, string replace, string stage):
    this.find = find
    this.replace = replace
    this.stage = stage
    this.pattern = Pattern.compile(find)

bool find(string s):
    return pattern.matcher(s).find()

string apply(string s):
    return pattern.matcher(s).replaceAll(replace)
